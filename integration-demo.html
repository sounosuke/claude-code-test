<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced IT Company Website - Interactive Demo</title>
    
    <!-- üö®Á∑äÊÄ•‰øÆÊ≠£: Â†ÖÁâ¢„Å™CDN„É©„Ç§„Éñ„É©„É™Ë™≠„ÅøËæº„Åø -->
    <!-- WebGazer.js - Ë§áÊï∞CDN„Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØÂØæÂøú -->
    <script>
        // WebGazer.jsÂãïÁöÑË™≠„ÅøËæº„Åø„Ç∑„Çπ„ÉÜ„É†
        (function() {
            const webgazerUrls = [
                'https://webgazer.cs.brown.edu/webgazer.js',
                'https://cdn.jsdelivr.net/npm/webgazer@2.0.1/dist/webgazer.min.js',
                'https://unpkg.com/webgazer@latest/dist/webgazer.min.js'
            ];
            
            let currentUrlIndex = 0;
            
            function loadWebGazer() {
                return new Promise((resolve, reject) => {
                    if (currentUrlIndex >= webgazerUrls.length) {
                        reject(new Error('„Åô„Åπ„Å¶„ÅÆWebGazer.js CDN„ÅÆË™≠„ÅøËæº„Åø„Å´Â§±Êïó„Åó„Åæ„Åó„Åü'));
                        return;
                    }
                    
                    const script = document.createElement('script');
                    script.src = webgazerUrls[currentUrlIndex];
                    script.onload = () => {
                        console.log(`‚úÖ WebGazer.jsË™≠„ÅøËæº„ÅøÊàêÂäü: ${webgazerUrls[currentUrlIndex]}`);
                        resolve();
                    };
                    script.onerror = () => {
                        console.warn(`‚ö†Ô∏è WebGazer.jsË™≠„ÅøËæº„ÅøÂ§±Êïó: ${webgazerUrls[currentUrlIndex]}`);
                        currentUrlIndex++;
                        loadWebGazer().then(resolve).catch(reject);
                    };
                    document.head.appendChild(script);
                });
            }
            
            // WebGazer.jsË™≠„ÅøËæº„ÅøÈñãÂßã
            window.webgazerPromise = loadWebGazer();
        })();
    </script>
    
    <!-- „Åù„ÅÆ‰ªñ„ÅÆ„É©„Ç§„Éñ„É©„É™Ôºà„Ç™„Éó„Ç∑„Éß„É≥Ôºâ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    
    <!-- Enhanced Styles -->
    <link rel="stylesheet" href="enhanced-styles.css">
    
    <style>
        /* Demo-specific styles */
        body {
            margin: 0;
            padding: 0;
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            overflow-x: hidden;
            /* üö®‰øÆÊ≠£: „Çπ„ÇØ„É≠„Éº„É´Ê©üËÉΩÁ¢∫‰øù */
            overflow-y: auto;
            min-height: 100vh;
        }

        .demo-container {
            position: relative;
            min-height: 100vh;
            padding: 20px;
        }

        .header {
            text-align: center;
            padding: 50px 0;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            margin-bottom: 40px;
            border-radius: 20px;
        }

        .header h1 {
            font-size: 3rem;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #00ff00, #0080ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin: 40px 0;
        }

        .feature-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 30px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .feature-card h3 {
            color: #00ff00;
            margin-bottom: 15px;
            font-size: 1.5rem;
        }

        .feature-card p {
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .demo-button {
            background: linear-gradient(45deg, #00ff00, #0080ff);
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-block;
            text-decoration: none;
        }

        .demo-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0, 255, 0, 0.3);
        }

        .interaction-demo {
            background: rgba(0, 0, 0, 0.3);
            padding: 40px;
            border-radius: 20px;
            margin: 40px 0;
            text-align: center;
        }

        .status-indicator {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.8);
            padding: 15px;
            border-radius: 10px;
            font-family: monospace;
            font-size: 12px;
            z-index: 1000;
        }

        .status-indicator .status-item {
            margin: 5px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .status-indicator .status-light {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-left: 10px;
        }

        .status-light.active {
            background: #00ff00;
            box-shadow: 0 0 10px #00ff00;
        }

        .status-light.inactive {
            background: #ff0000;
        }

        .holographic-demo {
            background: rgba(0, 0, 0, 0.9);
            padding: 20px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            color: #00ff00;
            position: relative;
            overflow: hidden;
            margin: 20px 0;
        }

        .code-lines {
            line-height: 1.8;
        }

        .code-line {
            opacity: 0;
            animation: codeAppear 0.5s ease forwards;
        }

        @keyframes codeAppear {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .emotion-demo {
            background: var(--primary-color);
            padding: 30px;
            border-radius: 15px;
            margin: 20px 0;
            text-align: center;
            transition: all 0.5s ease;
        }

        .emotion-buttons {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .emotion-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            padding: 10px 15px;
            border-radius: 20px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .emotion-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.05);
        }

        .particle-demo {
            height: 300px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 15px;
            position: relative;
            overflow: hidden;
            margin: 20px 0;
            cursor: pointer;
        }

        .particle-demo::before {
            content: 'Move your mouse here to interact with quantum particles';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: rgba(255, 255, 255, 0.7);
            text-align: center;
            z-index: 1;
        }

        .controls {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .control-group {
            margin: 15px 0;
        }

        .control-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .control-group input,
        .control-group select {
            width: 100%;
            padding: 8px;
            border: none;
            border-radius: 5px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
        }

        .control-group input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }

        .debug-info {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.8);
            padding: 15px;
            border-radius: 10px;
            font-family: monospace;
            font-size: 11px;
            color: #00ff00;
            max-width: 300px;
            display: none;
        }

        .debug-mode .debug-info {
            display: block;
        }

        @media (max-width: 768px) {
            .features-grid {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .status-indicator {
                font-size: 10px;
                padding: 10px;
            }
        }
    </style>
</head>
<body class="quantum-field">
    <!-- Status Indicator -->
    <div class="status-indicator">
        <div class="status-item">
            Eye Tracking: <div class="status-light inactive" id="eye-status"></div>
        </div>
        <div class="status-item">
            Mouse Prediction: <div class="status-light inactive" id="mouse-status"></div>
        </div>
        <div class="status-item">
            Emotion Detection: <div class="status-light inactive" id="emotion-status"></div>
        </div>
        <div class="status-item">
            Quantum Particles: <div class="status-light inactive" id="particle-status"></div>
        </div>
        <div class="status-item">
            FPS: <span id="fps-display">0</span>
        </div>
    </div>

    <!-- Debug Information -->
    <div class="debug-info">
        <div>Mouse Position: <span id="mouse-pos">0, 0</span></div>
        <div>Gaze Position: <span id="gaze-pos">0, 0</span></div>
        <div>Current Emotion: <span id="current-emotion">trust</span></div>
        <div>Particle Count: <span id="particle-count">0</span></div>
        <div>Memory Usage: <span id="memory-usage">0MB</span></div>
    </div>

    <div class="demo-container">
        <!-- Header -->
        <header class="header neural-ui gaze-interactive">
            <h1>Enhanced IT Company</h1>
            <p>Experience the future of web interaction</p>
            <button class="demo-button gaze-interactive predictive-hover" onclick="toggleDebugMode()">
                Toggle Debug Mode
            </button>
        </header>

        <!-- Features Grid -->
        <div class="features-grid">
            <div class="feature-card gaze-interactive predictive-hover emotional-element">
                <h3>üëÅÔ∏è Eye Tracking</h3>
                <p>Revolutionary eye-tracking technology that responds to your gaze, creating intuitive navigation experiences.</p>
                <button class="demo-button" onclick="startEyeCalibration()">Calibrate Eye Tracking</button>
            </div>

            <div class="feature-card gaze-interactive predictive-hover emotional-element">
                <h3>üéØ Mouse Prediction</h3>
                <p>Advanced algorithms predict your mouse movements, providing seamless pre-loading and smooth interactions.</p>
                <button class="demo-button" onclick="toggleMousePrediction()">Test Prediction</button>
            </div>

            <div class="feature-card gaze-interactive predictive-hover emotional-element">
                <h3>üé® Emotion Colors</h3>
                <p>Dynamic color schemes that adapt to your emotional state, creating personalized visual experiences.</p>
                <div class="emotion-buttons">
                    <button class="emotion-btn" onclick="changeEmotion('joy')">Joy</button>
                    <button class="emotion-btn" onclick="changeEmotion('trust')">Trust</button>
                    <button class="emotion-btn" onclick="changeEmotion('surprise')">Surprise</button>
                    <button class="emotion-btn" onclick="changeEmotion('anticipation')">Anticipation</button>
                </div>
            </div>

            <div class="feature-card gaze-interactive predictive-hover emotional-element">
                <h3>‚öõÔ∏è Quantum Particles</h3>
                <p>Beautiful particle physics simulation that responds to your interactions with quantum-inspired behaviors.</p>
                <button class="demo-button" onclick="addParticles()">Add Particles</button>
            </div>
        </div>

        <!-- Interactive Demos -->
        <div class="interaction-demo">
            <h2>Holographic Code Visualization</h2>
            <div class="holographic-demo holographic-code gaze-interactive">
                <div class="code-lines" id="code-display">
                    <div class="code-line">const futureTech = new InnovationEngine();</div>
                    <div class="code-line">futureTech.initialize({</div>
                    <div class="code-line">  eyeTracking: true,</div>
                    <div class="code-line">  emotionDetection: true,</div>
                    <div class="code-line">  quantumParticles: true</div>
                    <div class="code-line">});</div>
                    <div class="code-line">futureTech.createMagic();</div>
                </div>
            </div>
        </div>

        <div class="interaction-demo">
            <h2>Emotion-Responsive Theme</h2>
            <div class="emotion-demo" id="emotion-demo">
                <h3>Current Emotion: <span id="emotion-display">Trust</span></h3>
                <p>The background color changes based on detected or selected emotions</p>
            </div>
        </div>

        <div class="interaction-demo">
            <h2>Quantum Particle Interaction</h2>
            <div class="particle-demo" id="particle-demo">
                <!-- Quantum particles will be rendered here -->
            </div>
        </div>

        <!-- Controls -->
        <div class="controls">
            <h3>System Controls</h3>
            <div class="control-group">
                <label for="particle-count-slider">Particle Count:</label>
                <input type="range" id="particle-count-slider" min="50" max="500" value="200" onchange="updateParticleCount(this.value)">
            </div>
            <div class="control-group">
                <label for="animation-speed">Animation Speed:</label>
                <input type="range" id="animation-speed" min="0.1" max="2" step="0.1" value="1" onchange="updateAnimationSpeed(this.value)">
            </div>
            <div class="control-group">
                <label for="performance-mode">Performance Mode:</label>
                <select id="performance-mode" onchange="updatePerformanceMode(this.value)">
                    <option value="auto">Auto</option>
                    <option value="high">High Quality</option>
                    <option value="balanced">Balanced</option>
                    <option value="low">Low Resource</option>
                </select>
            </div>
        </div>
    </div>

    <!-- Eye Tracking Implementation Script -->
    <script>
        // üö®Á∑äÊÄ•‰øÆÊ≠£: Â†ÖÁâ¢„Å™ÁúºÁêÉËøΩË∑°„Ç∑„Çπ„ÉÜ„É†
        class RobustEyeTrackingSystem {
            constructor() {
                this.isInitialized = false;
                this.isCalibrating = false;
                this.calibrationPoints = [];
                this.currentPointIndex = 0;
                this.gazeData = [];
                this.calibrationAccuracy = 0;
                this.statusElement = null;
                this.progressElement = null;
                
                // üö®Êñ∞Ê©üËÉΩ: „Éá„Éê„ÉÉ„Ç∞„Å®Ë®∫Êñ≠
                this.debugMode = window.location.hash === '#debug';
                this.initializationAttempts = 0;
                this.maxInitializationAttempts = 3;
                this.systemStatus = 'uninitialized';
                
                // „Éñ„É©„Ç¶„Ç∂‰∫íÊèõÊÄß„ÉÅ„Çß„ÉÉ„ÇØ
                this.browserSupport = this.checkBrowserSupport();
                
                this.log('üéØ RobustEyeTrackingSystemÊßãÁØâÂÆå‰∫Ü', 'info');
            }
            
            checkBrowserSupport() {
                const support = {
                    mediaDevices: !!(navigator.mediaDevices && navigator.mediaDevices.getUserMedia),
                    webgl: !!window.WebGLRenderingContext,
                    https: window.location.protocol === 'https:' || window.location.hostname === 'localhost',
                    browser: this.detectBrowser()
                };
                
                this.log('üîç „Éñ„É©„Ç¶„Ç∂„Çµ„Éù„Éº„ÉàÁ¢∫Ë™ç:', 'info', support);
                return support;
            }
            
            detectBrowser() {
                const ua = navigator.userAgent;
                if (ua.includes('Chrome')) return 'Chrome';
                if (ua.includes('Firefox')) return 'Firefox';
                if (ua.includes('Safari') && !ua.includes('Chrome')) return 'Safari';
                if (ua.includes('Edge')) return 'Edge';
                return 'Unknown';
            }
            
            log(message, type = 'info', data = null) {
                const timestamp = new Date().toISOString();
                const logMessage = `[${timestamp}] ${message}`;
                
                switch (type) {
                    case 'error':
                        console.error(logMessage, data || '');
                        break;
                    case 'warn':
                        console.warn(logMessage, data || '');
                        break;
                    case 'success':
                        console.log(`‚úÖ ${logMessage}`, data || '');
                        break;
                    default:
                        console.log(`‚ÑπÔ∏è ${logMessage}`, data || '');
                }
                
                if (this.debugMode) {
                    this.updateDebugDisplay(logMessage, type);
                }
            }
            
            updateDebugDisplay(message, type) {
                let debugPanel = document.getElementById('debug-panel');
                if (!debugPanel) {
                    debugPanel = document.createElement('div');
                    debugPanel.id = 'debug-panel';
                    debugPanel.style.cssText = `
                        position: fixed;
                        bottom: 10px;
                        left: 10px;
                        width: 400px;
                        height: 200px;
                        background: rgba(0, 0, 0, 0.9);
                        color: white;
                        padding: 10px;
                        border-radius: 5px;
                        font-family: monospace;
                        font-size: 10px;
                        overflow-y: auto;
                        z-index: 10001;
                        border: 1px solid #333;
                    `;
                    document.body.appendChild(debugPanel);
                }
                
                const colors = {
                    error: '#ff4444',
                    warn: '#ffaa00',
                    success: '#44ff44',
                    info: '#4488ff'
                };
                
                const logEntry = document.createElement('div');
                logEntry.style.color = colors[type] || colors.info;
                logEntry.textContent = message;
                debugPanel.appendChild(logEntry);
                
                // ÊúÄÊñ∞„É≠„Ç∞„ÇíË°®Á§∫
                debugPanel.scrollTop = debugPanel.scrollHeight;
                
                // 100Ë°å„ÇíË∂Ö„Åà„Åü„ÇâÂè§„ÅÑ„É≠„Ç∞„ÇíÂâäÈô§
                if (debugPanel.children.length > 100) {
                    debugPanel.removeChild(debugPanel.firstChild);
                }
            }

            async initialize() {
                this.initializationAttempts++;
                this.systemStatus = 'initializing';
                
                try {
                    this.log(`üéØ WebGazer.jsÂàùÊúüÂåñÈñãÂßã (Ë©¶Ë°å ${this.initializationAttempts}/${this.maxInitializationAttempts})`, 'info');
                    
                    // ÂâçÊèêÊù°‰ª∂„ÉÅ„Çß„ÉÉ„ÇØ
                    const prereqCheck = await this.checkPrerequisites();
                    if (!prereqCheck.success) {
                        throw new Error(`ÂâçÊèêÊù°‰ª∂„Ç®„É©„Éº: ${prereqCheck.message}`);
                    }
                    
                    // WebGazer.jsÂà©Áî®ÂèØËÉΩÊÄßÁ¢∫Ë™ç
                    if (typeof webgazer === 'undefined') {
                        throw new Error('WebGazer.js„ÅåÂà©Áî®„Åß„Åç„Åæ„Åõ„Çì');
                    }
                    
                    this.log('WebGazer.jsÂà©Áî®ÂèØËÉΩÊÄßÁ¢∫Ë™çÂÆå‰∫Ü', 'success');
                    
                    // WebGazer.jsÂàùÊúüÂåñ - üö®ÂÆåÂÖ®‰øÆÊ≠£Áâà
                    this.log('WebGazer.jsÈñãÂßãÂá¶ÁêÜÂÆüË°å‰∏≠...', 'info');
                    
                    // ÊÆµÈöéÁöÑÂàùÊúüÂåñ
                    webgazer.setGazeListener((data, clock) => {
                        if (data && data.x && data.y) {
                            this.handleGazeData(data, clock);
                        }
                    });
                    
                    // WebGazerÈñãÂßã
                    await webgazer.begin();
                    
                    // Â∞ë„ÅóÂæÖÊ©ü„Åó„Å¶„Åã„ÇâË®≠ÂÆöÈÅ©Áî®
                    await new Promise(resolve => setTimeout(resolve, 1000));
                    
                    // ÂÆâÂÖ®„Å™Ë®≠ÂÆöÈÅ©Áî®
                    try {
                        // „Éì„Éá„Ç™„Éó„É¨„Éì„É•„Éº„ÇíÈùûË°®Á§∫
                        const videoContainer = document.getElementById('webgazerVideoContainer');
                        if (videoContainer) {
                            videoContainer.style.display = 'none';
                        }
                        
                        // ‰∫àÊ∏¨ÁÇπ„ÇíÈùûË°®Á§∫
                        const gazeDot = document.getElementById('webgazerGazeDot');
                        if (gazeDot) {
                            gazeDot.style.display = 'none';
                        }
                    } catch (settingsError) {
                        this.log('Ë®≠ÂÆö„Ç®„É©„ÉºÔºàÁ∂ôÁ∂öÂèØËÉΩÔºâ', 'warn', settingsError.message);
                    }

                    this.isInitialized = true;
                    this.systemStatus = 'initialized';
                    this.updateStatus('WebGazer.jsÂàùÊúüÂåñÂÆå‰∫Ü', 'success');
                    this.log('‚úÖ WebGazer.jsÂàùÊúüÂåñÊàêÂäü', 'success');
                    
                    return true;
                } catch (error) {
                    this.systemStatus = 'error';
                    this.log(`‚ùå WebGazer.jsÂàùÊúüÂåñÂ§±Êïó: ${error.message}`, 'error');
                    
                    // „É™„Éà„É©„Ç§„É≠„Ç∏„ÉÉ„ÇØ
                    if (this.initializationAttempts < this.maxInitializationAttempts) {
                        this.log(`üîÑ ${2}ÁßíÂæå„Å´ÂÜçË©¶Ë°å„Åó„Åæ„Åô...`, 'warn');
                        await this.delay(2000);
                        return this.initialize();
                    } else {
                        this.updateStatus(`ÂàùÊúüÂåñÂ§±Êïó: ${error.message}`, 'error');
                        this.showFallbackOptions();
                        return false;
                    }
                }
            }
            
            async checkPrerequisites() {
                const checks = [];
                
                // HTTPS/localhost „ÉÅ„Çß„ÉÉ„ÇØ
                if (!this.browserSupport.https) {
                    checks.push('HTTPSÊé•Á∂ö„Åæ„Åü„ÅØlocalhost„ÅåÂøÖË¶Å„Åß„Åô');
                }
                
                // MediaDevices API „ÉÅ„Çß„ÉÉ„ÇØ
                if (!this.browserSupport.mediaDevices) {
                    checks.push('„Ç´„É°„É©API„Åå„Çµ„Éù„Éº„Éà„Åï„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì');
                }
                
                // WebGL „ÉÅ„Çß„ÉÉ„ÇØ
                if (!this.browserSupport.webgl) {
                    checks.push('WebGL„Åå„Çµ„Éù„Éº„Éà„Åï„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì');
                }
                
                // WebGazer.js CDNË™≠„ÅøËæº„ÅøÁ¢∫Ë™ç
                try {
                    await window.webgazerPromise;
                    this.log('WebGazer.js CDNË™≠„ÅøËæº„ÅøÁ¢∫Ë™çÂÆå‰∫Ü', 'success');
                } catch (error) {
                    checks.push(`WebGazer.jsË™≠„ÅøËæº„ÅøÂ§±Êïó: ${error.message}`);
                }
                
                return {
                    success: checks.length === 0,
                    message: checks.join(', ')
                };
            }
            
            delay(ms) {
                return new Promise(resolve => setTimeout(resolve, ms));
            }
            
            showFallbackOptions() {
                const fallbackOverlay = document.createElement('div');
                fallbackOverlay.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0, 0, 0, 0.95);
                    z-index: 10000;
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    color: white;
                    font-family: Arial, sans-serif;
                    overflow-y: auto;
                `;
                
                const isHTTPS = window.location.protocol === 'https:';
                const isLocalhost = window.location.hostname === 'localhost';
                const isFile = window.location.protocol === 'file:';
                
                fallbackOverlay.innerHTML = `
                    <div style="text-align: center; max-width: 700px; padding: 40px; margin: 20px;">
                        <h2 style="color: #ffaa00;">üîí HTTPSÁí∞Â¢É„ÅåÂøÖË¶Å„Åß„Åô</h2>
                        
                        <div style="margin: 20px 0; padding: 25px; background: rgba(255, 170, 0, 0.1); border-radius: 15px; text-align: left; border-left: 4px solid #ffaa00;">
                            <h3 style="color: #ffaa00; margin-top: 0;">üìã Ê†πÊú¨ÂéüÂõ†</h3>
                            <p><strong>ÁúºÁêÉËøΩË∑°Ê©üËÉΩ„Å´„ÅØ„Ç´„É°„É©„Ç¢„ÇØ„Çª„Çπ„ÅåÂøÖË¶Å„Åß„Åô„ÄÇ</strong></p>
                            <p>„Éñ„É©„Ç¶„Ç∂„ÅÆ„Çª„Ç≠„É•„É™„ÉÜ„Ç£Âà∂Á¥Ñ„Å´„Çà„Çä„ÄÅ„Ç´„É°„É©„Ç¢„ÇØ„Çª„Çπ„ÅØ<strong>HTTPSÁí∞Â¢É</strong>„Åæ„Åü„ÅØ<strong>localhost</strong>„Åß„ÅÆ„ÅøÂà©Áî®ÂèØËÉΩ„Åß„Åô„ÄÇ</p>
                            <div style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 8px; margin: 15px 0;">
                                <strong>ÁèæÂú®„ÅÆÁí∞Â¢É:</strong> ${window.location.protocol}//${window.location.hostname}<br>
                                <strong>HTTPS:</strong> ${isHTTPS ? '‚úÖ ÂØæÂøú' : '‚ùå Êú™ÂØæÂøú'}<br>
                                <strong>Localhost:</strong> ${isLocalhost ? '‚úÖ ÂØæÂøú' : '‚ùå Êú™ÂØæÂøú'}<br>
                                <strong>File://:</strong> ${isFile ? '‚ö†Ô∏è „Ç´„É°„É©Âà©Áî®‰∏çÂèØ' : '‚úÖ ÂïèÈ°å„Å™„Åó'}
                            </div>
                        </div>
                        
                        <div style="margin: 20px 0; padding: 25px; background: rgba(76, 175, 80, 0.1); border-radius: 15px; text-align: left; border-left: 4px solid #4CAF50;">
                            <h3 style="color: #4CAF50; margin-top: 0;">üöÄ Ëß£Ê±∫ÊñπÊ≥ï</h3>
                            
                            <h4>üì± „Åô„Åê„Å´Ë©¶„Åõ„ÇãÊñπÊ≥ï:</h4>
                            <ol>
                                <li><strong>„É≠„Éº„Ç´„É´„Çµ„Éº„Éê„ÉºËµ∑Âãï</strong> (Êé®Â•®)
                                    <div style="background: rgba(0,0,0,0.3); padding: 10px; border-radius: 5px; margin: 8px 0; font-family: monospace;">
                                        # Python 3„ÅÆÂ†¥Âêà<br>
                                        python -m http.server 8000<br><br>
                                        # Python 2„ÅÆÂ†¥Âêà<br>
                                        python -m SimpleHTTPServer 8000<br><br>
                                        # Node.js„ÅÆÂ†¥Âêà<br>
                                        npx http-server
                                    </div>
                                    „Åù„ÅÆÂæå <code>http://localhost:8000</code> „Åß„Ç¢„ÇØ„Çª„Çπ
                                </li>
                                
                                <li><strong>ÁÑ°ÊñôHTTPSÁí∞Â¢É„ÇíÂà©Áî®</strong>
                                    <ul>
                                        <li><a href="https://pages.github.com/" target="_blank" style="color: #4CAF50;">GitHub Pages</a> - ÁÑ°Êñô„ÅßHTTPSÂØæÂøú</li>
                                        <li><a href="https://netlify.com/" target="_blank" style="color: #4CAF50;">Netlify</a> - „Éâ„É©„ÉÉ„Ç∞&„Éâ„É≠„ÉÉ„Éó„Åß„Éá„Éó„É≠„Ç§</li>
                                        <li><a href="https://vercel.com/" target="_blank" style="color: #4CAF50;">Vercel</a> - È´òÈÄü„Éá„Éó„É≠„Ç§</li>
                                    </ul>
                                </li>
                            </ol>
                            
                            <h4>üé≠ ‰ª£Êõø‰ΩìÈ®ì:</h4>
                            <p>ÁúºÁêÉËøΩË∑°„ÅåÂà©Áî®„Åß„Åç„Å™„ÅÑÂ†¥Âêà„Åß„ÇÇ„ÄÅ<strong>„Éû„Ç¶„Çπ„Éà„É©„ÉÉ„Ç≠„É≥„Ç∞Ê©üËÉΩ</strong>„ÅßWeb„Çµ„Ç§„Éà„ÅÆÈù©Êñ∞ÁöÑ„Å™„Ç§„É≥„Çø„É©„ÇØ„Ç∑„Éß„É≥„Çí‰ΩìÈ®ì„Åß„Åç„Åæ„ÅôÔºÅ</p>
                        </div>
                        
                        <div style="margin-top: 30px;">
                            <button onclick="enableMouseTrackingMode()" style="
                                background: linear-gradient(45deg, #4CAF50, #45a049);
                                border: none;
                                padding: 15px 30px;
                                border-radius: 25px;
                                color: white;
                                font-size: 16px;
                                font-weight: bold;
                                cursor: pointer;
                                margin: 10px;
                                box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
                            ">üñ±Ô∏è „Éû„Ç¶„Çπ„Éà„É©„ÉÉ„Ç≠„É≥„Ç∞„Åß‰ΩìÈ®ì</button>
                            
                            <button onclick="this.parentElement.parentElement.parentElement.remove()" style="
                                background: #666;
                                border: none;
                                padding: 15px 30px;
                                border-radius: 25px;
                                color: white;
                                font-size: 16px;
                                cursor: pointer;
                                margin: 10px;
                            ">Èñâ„Åò„Çã</button>
                            
                            <button onclick="copyLocalServerCommand()" style="
                                background: #2196F3;
                                border: none;
                                padding: 15px 30px;
                                border-radius: 25px;
                                color: white;
                                font-size: 16px;
                                cursor: pointer;
                                margin: 10px;
                            ">üìã „Çµ„Éº„Éê„Éº„Ç≥„Éû„É≥„Éâ„Çí„Ç≥„Éî„Éº</button>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(fallbackOverlay);
            }
            
            // üö®Êñ∞Ê©üËÉΩ: „Éû„Ç¶„Çπ„Éà„É©„ÉÉ„Ç≠„É≥„Ç∞„É¢„Éº„Éâ
            enableMouseTrackingMode() {
                console.log('üñ±Ô∏è „Éû„Ç¶„Çπ„Éà„É©„ÉÉ„Ç≠„É≥„Ç∞„É¢„Éº„ÉâÈñãÂßã');
                
                // „Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØÁîªÈù¢„ÇíÈñâ„Åò„Çã
                const overlay = document.querySelector('[style*="position: fixed"]');
                if (overlay) overlay.remove();
                
                // „Éû„Ç¶„Çπ„Éà„É©„ÉÉ„Ç≠„É≥„Ç∞Ê©üËÉΩ„ÇíÊúâÂäπÂåñ
                this.initializeMouseTracking();
                
                // „É¶„Éº„Ç∂„Éº„Å´ÈÄöÁü•
                this.updateStatus('„Éû„Ç¶„Çπ„Éà„É©„ÉÉ„Ç≠„É≥„Ç∞„É¢„Éº„Éâ„ÅåÊúâÂäπ„Å´„Å™„Çä„Åæ„Åó„Åü', 'success');
                document.getElementById('eye-status').className = 'status-light active';
            }
            
            initializeMouseTracking() {
                let mouseTrackingActive = true;
                
                // „Éû„Ç¶„Çπ„Éà„É©„ÉÉ„Ç≠„É≥„Ç∞Ë°®Á§∫
                const tracker = document.createElement('div');
                tracker.id = 'mouse-tracker';
                tracker.style.cssText = `
                    position: fixed;
                    width: 15px;
                    height: 15px;
                    background: radial-gradient(circle, #00ff00, #0080ff);
                    border: 2px solid rgba(255, 255, 255, 0.8);
                    border-radius: 50%;
                    pointer-events: none;
                    z-index: 9999;
                    transition: all 0.1s ease;
                    box-shadow: 0 0 20px rgba(0, 255, 0, 0.6);
                `;
                document.body.appendChild(tracker);
                
                // „Éû„Ç¶„ÇπËøΩË∑°
                document.addEventListener('mousemove', (e) => {
                    if (!mouseTrackingActive) return;
                    
                    tracker.style.left = (e.clientX - 7) + 'px';
                    tracker.style.top = (e.clientY - 7) + 'px';
                    
                    // „Ç§„É≥„Çø„É©„ÇØ„ÉÜ„Ç£„ÉñË¶ÅÁ¥†„Å®„ÅÆÁõ∏‰∫í‰ΩúÁî®
                    const elements = document.elementsFromPoint(e.clientX, e.clientY);
                    elements.forEach(element => {
                        if (element.classList.contains('gaze-interactive') || 
                            element.classList.contains('predictive-hover')) {
                            this.triggerMouseEffect(element);
                        }
                    });
                });
                
                // ÊÉÖÂ†±„Éë„Éç„É´Ë°®Á§∫
                this.showMouseTrackingInfo();
            }
            
            triggerMouseEffect(element) {
                element.style.transition = 'all 0.3s ease';
                element.style.transform = 'scale(1.02)';
                element.style.boxShadow = '0 0 15px rgba(0, 255, 0, 0.4)';
                
                setTimeout(() => {
                    element.style.transform = '';
                    element.style.boxShadow = '';
                }, 500);
            }
            
            showMouseTrackingInfo() {
                const infoPanel = document.createElement('div');
                infoPanel.style.cssText = `
                    position: fixed;
                    top: 80px;
                    right: 20px;
                    background: rgba(0, 0, 0, 0.8);
                    color: #00ff00;
                    padding: 15px;
                    border-radius: 10px;
                    font-family: monospace;
                    font-size: 12px;
                    z-index: 1001;
                    border: 1px solid #00ff00;
                `;
                
                infoPanel.innerHTML = `
                    <strong>üñ±Ô∏è „Éû„Ç¶„Çπ„Éà„É©„ÉÉ„Ç≠„É≥„Ç∞ÊúâÂäπ</strong><br>
                    „Éª„Éû„Ç¶„Çπ„Åß„Ç§„É≥„Çø„É©„ÇØ„Ç∑„Éß„É≥‰ΩìÈ®ì<br>
                    „ÉªË¶ÅÁ¥†„Å´„Éõ„Éê„Éº„ÅßÂèçÂøú<br>
                    „ÉªÁúºÁêÉËøΩË∑°„ÅÆ‰ª£ÊõøÊ©üËÉΩ<br>
                    <button onclick="this.parentElement.remove()" style="
                        background: #00ff00;
                        border: none;
                        color: black;
                        padding: 5px 10px;
                        border-radius: 3px;
                        cursor: pointer;
                        margin-top: 10px;
                        font-size: 10px;
                    ">Èñâ„Åò„Çã</button>
                `;
                
                document.body.appendChild(infoPanel);
            }
            
            // „É≠„Éº„Ç´„É´„Çµ„Éº„Éê„Éº„Ç≥„Éû„É≥„Éâ„Ç≥„Éî„ÉºÊ©üËÉΩ
            copyLocalServerCommand() {
                const command = 'python -m http.server 8000';
                
                if (navigator.clipboard) {
                    navigator.clipboard.writeText(command).then(() => {
                        alert('„Çµ„Éº„Éê„ÉºËµ∑Âãï„Ç≥„Éû„É≥„Éâ„Çí„Ç≥„Éî„Éº„Åó„Åæ„Åó„ÅüÔºÅ\n„Çø„Éº„Éü„Éä„É´„ÅßÂÆüË°å„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ');
                    });
                } else {
                    // „Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØ
                    const textArea = document.createElement('textarea');
                    textArea.value = command;
                    document.body.appendChild(textArea);
                    textArea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textArea);
                    alert('„Çµ„Éº„Éê„ÉºËµ∑Âãï„Ç≥„Éû„É≥„Éâ„Çí„Ç≥„Éî„Éº„Åó„Åæ„Åó„ÅüÔºÅ\n„Çø„Éº„Éü„Éä„É´„ÅßÂÆüË°å„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ');
                }
            }

            handleGazeData(data, clock) {
                this.gazeData.push({
                    x: data.x,
                    y: data.y,
                    timestamp: clock
                });

                // „Éá„Éº„Çø„ÇíÊúÄÊñ∞100‰ª∂„Å´Âà∂Èôê
                if (this.gazeData.length > 100) {
                    this.gazeData.shift();
                }

                // „Éá„Éê„ÉÉ„Ç∞Ë°®Á§∫Êõ¥Êñ∞
                if (document.getElementById('gaze-pos')) {
                    document.getElementById('gaze-pos').textContent = `${Math.round(data.x)}, ${Math.round(data.y)}`;
                }

                // Ê†°Ê≠£‰∏≠„ÅÆÂ†¥Âêà„ÄÅË¶ñÁ∑ö‰ΩçÁΩÆ„ÇíË°®Á§∫
                if (this.isCalibrating) {
                    this.showGazeIndicator(data.x, data.y);
                }
            }

            showGazeIndicator(x, y) {
                let indicator = document.getElementById('gaze-indicator');
                if (!indicator) {
                    indicator = document.createElement('div');
                    indicator.id = 'gaze-indicator';
                    indicator.style.cssText = `
                        position: fixed;
                        width: 20px;
                        height: 20px;
                        background: rgba(255, 0, 0, 0.7);
                        border: 2px solid #fff;
                        border-radius: 50%;
                        pointer-events: none;
                        z-index: 10001;
                        transition: all 0.1s ease;
                    `;
                    document.body.appendChild(indicator);
                }

                indicator.style.left = (x - 10) + 'px';
                indicator.style.top = (y - 10) + 'px';
            }

            async startCalibration() {
                if (!this.isInitialized) {
                    const initialized = await this.initialize();
                    if (!initialized) return;
                }

                this.updateStatus('„Ç´„É°„É©„Ç¢„ÇØ„Çª„ÇπÊ®©Èôê„ÇíÁ¢∫Ë™ç‰∏≠...', 'warning');
                
                try {
                    // „Ç´„É°„É©„Ç¢„ÇØ„Çª„ÇπÊ®©Èôê„ÅÆÁ¢∫Ë™ç
                    const stream = await navigator.mediaDevices.getUserMedia({ video: true });
                    stream.getTracks().forEach(track => track.stop()); // ‰∏ÄÊôÇÁöÑ„Å™„Çπ„Éà„É™„Éº„É†„ÇíÂÅúÊ≠¢
                    
                    this.updateStatus('Ê†°Ê≠£„ÇíÈñãÂßã„Åó„Åæ„Åô', 'info');
                    this.isCalibrating = true;
                    
                    // Ê†°Ê≠£„Éù„Ç§„É≥„Éà„ÅÆË®≠ÂÆöÔºà9ÁÇπÊ†°Ê≠£Ôºâ
                    this.calibrationPoints = [
                        { x: window.innerWidth * 0.1, y: window.innerHeight * 0.1 },   // Â∑¶‰∏ä
                        { x: window.innerWidth * 0.5, y: window.innerHeight * 0.1 },   // ‰∏≠‰∏ä
                        { x: window.innerWidth * 0.9, y: window.innerHeight * 0.1 },   // Âè≥‰∏ä
                        { x: window.innerWidth * 0.1, y: window.innerHeight * 0.5 },   // Â∑¶‰∏≠
                        { x: window.innerWidth * 0.5, y: window.innerHeight * 0.5 },   // ‰∏≠Â§Æ
                        { x: window.innerWidth * 0.9, y: window.innerHeight * 0.5 },   // Âè≥‰∏≠
                        { x: window.innerWidth * 0.1, y: window.innerHeight * 0.9 },   // Â∑¶‰∏ã
                        { x: window.innerWidth * 0.5, y: window.innerHeight * 0.9 },   // ‰∏≠‰∏ã
                        { x: window.innerWidth * 0.9, y: window.innerHeight * 0.9 }    // Âè≥‰∏ã
                    ];
                    
                    this.currentPointIndex = 0;
                    this.showCalibrationInterface();
                    
                } catch (error) {
                    console.error('„Ç´„É°„É©„Ç¢„ÇØ„Çª„Çπ„Ç®„É©„Éº:', error);
                    this.updateStatus('„Ç´„É°„É©„Ç¢„ÇØ„Çª„Çπ„ÅåÊãíÂê¶„Åï„Çå„Åæ„Åó„Åü„ÄÇ„Éñ„É©„Ç¶„Ç∂„ÅÆË®≠ÂÆö„ÇíÁ¢∫Ë™ç„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ', 'error');
                    this.showCameraPermissionHelp();
                }
            }

            showCalibrationInterface() {
                // Êó¢Â≠ò„ÅÆ„Ç™„Éº„Éê„Éº„É¨„Ç§„ÇíÂâäÈô§
                const existingOverlay = document.getElementById('calibration-overlay');
                if (existingOverlay) {
                    existingOverlay.remove();
                }

                // Ê†°Ê≠£„Ç™„Éº„Éê„Éº„É¨„Ç§„ÅÆ‰ΩúÊàê
                const overlay = document.createElement('div');
                overlay.id = 'calibration-overlay';
                overlay.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0, 0, 0, 0.9);
                    z-index: 10000;
                    display: flex;
                    flex-direction: column;
                    justify-content: center;
                    align-items: center;
                    color: white;
                    font-family: Arial, sans-serif;
                `;

                // ÊåáÁ§∫„ÉÜ„Ç≠„Çπ„Éà
                const instruction = document.createElement('div');
                instruction.style.cssText = `
                    position: absolute;
                    top: 50px;
                    left: 50%;
                    transform: translateX(-50%);
                    text-align: center;
                    font-size: 24px;
                    color: #00ff00;
                `;
                instruction.innerHTML = `
                    <h2>üëÅÔ∏è ÁúºÁêÉËøΩË∑°Ê†°Ê≠£</h2>
                    <p>Ëµ§„ÅÑÁÇπ„ÅåË°®Á§∫„Åï„Çå„Åü„Çâ„ÄÅ„Åù„ÅÆÁÇπ„ÇíË¶ã„Å§„ÇÅ„Å¶„ÇØ„É™„ÉÉ„ÇØ„Åó„Å¶„Åè„Å†„Åï„ÅÑ</p>
                    <p>ÈÄ≤Êçó: <span id="calibration-progress">0/${this.calibrationPoints.length}</span></p>
                `;
                overlay.appendChild(instruction);

                // ÈÄ≤ÊçóË¶ÅÁ¥†„ÅÆ‰øùÂ≠ò
                this.progressElement = instruction.querySelector('#calibration-progress');

                document.body.appendChild(overlay);
                this.showNextCalibrationPoint();
            }

            showNextCalibrationPoint() {
                if (this.currentPointIndex >= this.calibrationPoints.length) {
                    this.completeCalibration();
                    return;
                }

                const point = this.calibrationPoints[this.currentPointIndex];
                const overlay = document.getElementById('calibration-overlay');
                
                // Êó¢Â≠ò„ÅÆÁÇπ„ÇíÂâäÈô§
                const existingDot = overlay.querySelector('.calibration-dot');
                if (existingDot) {
                    existingDot.remove();
                }

                // Êñ∞„Åó„ÅÑÊ†°Ê≠£ÁÇπ„Çí‰ΩúÊàê
                const dot = document.createElement('div');
                dot.className = 'calibration-dot';
                dot.style.cssText = `
                    position: absolute;
                    width: 20px;
                    height: 20px;
                    background: #ff0000;
                    border: 3px solid #ffffff;
                    border-radius: 50%;
                    left: ${point.x - 10}px;
                    top: ${point.y - 10}px;
                    cursor: pointer;
                    animation: calibrationPulse 1s infinite;
                    box-shadow: 0 0 20px rgba(255, 0, 0, 0.8);
                `;

                // CSS „Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥„ÅÆËøΩÂä†
                if (!document.getElementById('calibration-styles')) {
                    const style = document.createElement('style');
                    style.id = 'calibration-styles';
                    style.textContent = `
                        @keyframes calibrationPulse {
                            0%, 100% { transform: scale(1); opacity: 1; }
                            50% { transform: scale(1.3); opacity: 0.7; }
                        }
                    `;
                    document.head.appendChild(style);
                }

                dot.onclick = () => {
                    // WebGazer.js„Å´Ê†°Ê≠£ÁÇπ„ÇíÁôªÈå≤
                    webgazer.recordScreenPosition(point.x, point.y, 'click');
                    
                    this.currentPointIndex++;
                    this.updateProgress();
                    
                    // Ê¨°„ÅÆÁÇπ„Å´ÈÄ≤„ÇÄ
                    setTimeout(() => {
                        this.showNextCalibrationPoint();
                    }, 500);
                };

                overlay.appendChild(dot);
                this.updateProgress();
            }

            updateProgress() {
                if (this.progressElement) {
                    this.progressElement.textContent = `${this.currentPointIndex}/${this.calibrationPoints.length}`;
                }
            }

            async completeCalibration() {
                this.isCalibrating = false;
                
                // Ê†°Ê≠£Á≤æÂ∫¶„ÅÆË®àÁÆó
                await this.calculateAccuracy();
                
                const overlay = document.getElementById('calibration-overlay');
                overlay.innerHTML = `
                    <div style="text-align: center; color: #00ff00;">
                        <h2>‚úÖ Ê†°Ê≠£ÂÆå‰∫Ü!</h2>
                        <p>Á≤æÂ∫¶: ${this.calibrationAccuracy}%</p>
                        <p>ÁúºÁêÉËøΩË∑°„ÅåÊúâÂäπ„Å´„Å™„Çä„Åæ„Åó„Åü</p>
                        <button onclick="eyeTracker.finishCalibration()" style="
                            background: linear-gradient(45deg, #00ff00, #0080ff);
                            border: none;
                            padding: 15px 30px;
                            border-radius: 25px;
                            color: white;
                            font-size: 16px;
                            font-weight: bold;
                            cursor: pointer;
                            margin-top: 20px;
                        ">Á∂öË°å</button>
                    </div>
                `;

                // „Çπ„ÉÜ„Éº„Çø„ÇπÊõ¥Êñ∞
                this.updateStatus(`Ê†°Ê≠£ÂÆå‰∫Ü (Á≤æÂ∫¶: ${this.calibrationAccuracy}%)`, 'success');
                document.getElementById('eye-status').className = 'status-light active';
            }

            async calculateAccuracy() {
                try {
                    // Á∞°Âçò„Å™Á≤æÂ∫¶Ë®àÁÆó (ÂÆüÈöõ„ÅÆÂÆüË£Ö„Åß„ÅØÊõ¥„Å´Ë©≥Á¥∞„Å™Ë®àÁÆó„ÅåÂøÖË¶Å)
                    const recentGazeData = this.gazeData.slice(-10);
                    if (recentGazeData.length > 0) {
                        const variance = this.calculateVariance(recentGazeData);
                        this.calibrationAccuracy = Math.max(20, Math.min(95, 95 - variance / 10));
                    } else {
                        this.calibrationAccuracy = 75; // „Éá„Éï„Ç©„É´„ÉàÂÄ§
                    }
                    this.calibrationAccuracy = Math.round(this.calibrationAccuracy);
                } catch (error) {
                    console.error('Á≤æÂ∫¶Ë®àÁÆó„Ç®„É©„Éº:', error);
                    this.calibrationAccuracy = 70;
                }
            }

            calculateVariance(data) {
                if (data.length === 0) return 100;
                
                const avgX = data.reduce((sum, point) => sum + point.x, 0) / data.length;
                const avgY = data.reduce((sum, point) => sum + point.y, 0) / data.length;
                
                const variance = data.reduce((sum, point) => {
                    return sum + Math.pow(point.x - avgX, 2) + Math.pow(point.y - avgY, 2);
                }, 0) / data.length;
                
                return Math.sqrt(variance);
            }

            finishCalibration() {
                const overlay = document.getElementById('calibration-overlay');
                if (overlay) {
                    overlay.style.opacity = '0';
                    setTimeout(() => {
                        overlay.remove();
                        // Ë¶ñÁ∑ö„Ç§„É≥„Ç∏„Ç±„Éº„Çø„Éº„ÇíÂâäÈô§
                        const indicator = document.getElementById('gaze-indicator');
                        if (indicator) indicator.remove();
                    }, 500);
                }
                
                // Ê†°Ê≠£„Çπ„Çø„Ç§„É´„ÇíÂâäÈô§
                const styles = document.getElementById('calibration-styles');
                if (styles) styles.remove();
                
                this.updateStatus('ÁúºÁêÉËøΩË∑°„ÅåÊúâÂäπ„Åß„Åô', 'success');
            }

            showCameraPermissionHelp() {
                const helpOverlay = document.createElement('div');
                helpOverlay.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0, 0, 0, 0.9);
                    z-index: 10000;
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    color: white;
                    font-family: Arial, sans-serif;
                `;
                
                helpOverlay.innerHTML = `
                    <div style="text-align: center; max-width: 500px; padding: 40px;">
                        <h2 style="color: #ff6b6b;">üì∑ „Ç´„É°„É©„Ç¢„ÇØ„Çª„Çπ„ÅåÂøÖË¶Å„Åß„Åô</h2>
                        <p>ÁúºÁêÉËøΩË∑°Ê©üËÉΩ„Çí‰ΩøÁî®„Åô„Çã„Å´„ÅØ„ÄÅWeb„Ç´„É°„É©„Å∏„ÅÆ„Ç¢„ÇØ„Çª„Çπ„ÇíË®±ÂèØ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ</p>
                        <div style="margin: 20px 0; padding: 20px; background: rgba(255, 255, 255, 0.1); border-radius: 10px;">
                            <h3>ÊâãÈ†Ü:</h3>
                            <ol style="text-align: left;">
                                <li>„Éñ„É©„Ç¶„Ç∂„ÅÆ„Ç¢„Éâ„É¨„Çπ„Éê„Éº„Å´„ÅÇ„Çã„Ç´„É°„É©„Ç¢„Ç§„Ç≥„É≥„Çí„ÇØ„É™„ÉÉ„ÇØ</li>
                                <li>„ÄåË®±ÂèØ„Äç„Åæ„Åü„ÅØ„ÄåAllow„Äç„ÇíÈÅ∏Êäû</li>
                                <li>„Éö„Éº„Ç∏„ÇíÂÜçË™≠„ÅøËæº„Åø</li>
                                <li>ÂÜçÂ∫¶„ÄåCalibrate Eye Tracking„Äç„Éú„Çø„É≥„ÇíÊäº„Åô</li>
                            </ol>
                        </div>
                        <button onclick="this.parentElement.parentElement.remove()" style="
                            background: #ff6b6b;
                            border: none;
                            padding: 12px 24px;
                            border-radius: 20px;
                            color: white;
                            cursor: pointer;
                            margin-top: 20px;
                        ">Èñâ„Åò„Çã</button>
                    </div>
                `;
                
                document.body.appendChild(helpOverlay);
            }

            updateStatus(message, type = 'info') {
                console.log(`üéØ [${type.toUpperCase()}] ${message}`);
                
                // „Çπ„ÉÜ„Éº„Çø„ÇπË°®Á§∫„ÅÆÊõ¥Êñ∞
                if (!this.statusElement) {
                    this.statusElement = document.createElement('div');
                    this.statusElement.id = 'eye-tracking-status';
                    this.statusElement.style.cssText = `
                        position: fixed;
                        top: 80px;
                        right: 20px;
                        background: rgba(0, 0, 0, 0.9);
                        color: white;
                        padding: 10px 15px;
                        border-radius: 5px;
                        font-family: monospace;
                        font-size: 12px;
                        z-index: 1001;
                        max-width: 300px;
                        word-wrap: break-word;
                    `;
                    document.body.appendChild(this.statusElement);
                }

                const colors = {
                    info: '#00bfff',
                    success: '#00ff00',
                    warning: '#ffa500',
                    error: '#ff6b6b'
                };

                this.statusElement.style.borderLeft = `4px solid ${colors[type] || colors.info}`;
                this.statusElement.textContent = message;

                // 5ÁßíÂæå„Å´Ëá™Âãï„ÅßÊ∂àÂéªÔºà„Ç®„É©„Éº‰ª•Â§ñÔºâ
                if (type !== 'error') {
                    setTimeout(() => {
                        if (this.statusElement && this.statusElement.textContent === message) {
                            this.statusElement.style.opacity = '0';
                            setTimeout(() => {
                                if (this.statusElement) {
                                    this.statusElement.remove();
                                    this.statusElement = null;
                                }
                            }, 300);
                        }
                    }, 5000);
                }
            }

            // ÊâãÂãï„ÅßÂÅúÊ≠¢„Åô„ÇãÂ†¥Âêà
            stop() {
                if (webgazer.isReady()) {
                    webgazer.end();
                }
                this.isInitialized = false;
                this.isCalibrating = false;
                
                // UIË¶ÅÁ¥†„ÅÆÂâäÈô§
                const overlay = document.getElementById('calibration-overlay');
                if (overlay) overlay.remove();
                
                const indicator = document.getElementById('gaze-indicator');
                if (indicator) indicator.remove();
                
                if (this.statusElement) {
                    this.statusElement.remove();
                    this.statusElement = null;
                }
                
                this.updateStatus('ÁúºÁêÉËøΩË∑°„ÇíÂÅúÊ≠¢„Åó„Åæ„Åó„Åü', 'info');
            }
        }

        // üö®Á∑äÊÄ•‰øÆÊ≠£: Â†ÖÁâ¢„Å™„Ç∞„É≠„Éº„Éê„É´ÂàùÊúüÂåñ„Ç∑„Çπ„ÉÜ„É†
        let robustEyeTracker = null;
        let systemInitialized = false;
        
        // ÂÆåÂÖ®ÂàùÊúüÂåñ„Ç∑„Çπ„ÉÜ„É†
        async function initializeRobustSystem() {
            try {
                console.log('üöÄ Â†ÖÁâ¢„Å™ÁúºÁêÉËøΩË∑°„Ç∑„Çπ„ÉÜ„É†ÂàùÊúüÂåñÈñãÂßã...');
                
                // WebGazer.jsË™≠„ÅøËæº„ÅøÂæÖÊ©ü
                await window.webgazerPromise;
                
                // „Ç∑„Çπ„ÉÜ„É†ÊßãÁØâ
                robustEyeTracker = new RobustEyeTrackingSystem();
                
                // ÂàùÊúüÂåñÁä∂ÊÖãÊõ¥Êñ∞
                systemInitialized = true;
                
                console.log('‚úÖ Â†ÖÁâ¢„Å™ÁúºÁêÉËøΩË∑°„Ç∑„Çπ„ÉÜ„É†Ê∫ñÂÇôÂÆå‰∫Ü');
                
                // „Çπ„ÉÜ„Éº„Çø„ÇπË°®Á§∫Êõ¥Êñ∞
                updateSystemStatus('ready', 'ÁúºÁêÉËøΩË∑°„Ç∑„Çπ„ÉÜ„É†Ê∫ñÂÇôÂÆå‰∫Ü');
                
            } catch (error) {
                console.error('‚ùå „Ç∑„Çπ„ÉÜ„É†ÂàùÊúüÂåñÂ§±Êïó:', error);
                systemInitialized = false;
                updateSystemStatus('error', `„Ç∑„Çπ„ÉÜ„É†ÂàùÊúüÂåñÂ§±Êïó: ${error.message}`);
            }
        }
        
        // „Ç∑„Çπ„ÉÜ„É†Áä∂ÊÖãË°®Á§∫Êõ¥Êñ∞
        function updateSystemStatus(status, message) {
            const statusElement = document.getElementById('eye-status');
            if (statusElement) {
                statusElement.className = status === 'ready' ? 'status-light active' : 'status-light inactive';
            }
            
            // „Éá„Éê„ÉÉ„Ç∞„É¢„Éº„Éâ„Åß„ÅÆË©≥Á¥∞Ë°®Á§∫
            if (window.location.hash === '#debug') {
                console.log(`üéØ „Ç∑„Çπ„ÉÜ„É†Áä∂ÊÖã: ${status} - ${message}`);
            }
        }

        // Ê†°Ê≠£ÈñãÂßãÈñ¢Êï∞Ôºà„Éú„Çø„É≥„Åã„ÇâÂëº„Å≥Âá∫„Åï„Çå„ÇãÔºâ
        async function startEyeCalibration() {
            try {
                console.log('üëÅÔ∏è ÁúºÁêÉËøΩË∑°Ê†°Ê≠£ÈñãÂßãË¶ÅÊ±Ç...');
                
                if (!systemInitialized) {
                    console.log('‚è≥ „Ç∑„Çπ„ÉÜ„É†ÂàùÊúüÂåñ‰∏≠...');
                    updateSystemStatus('initializing', '„Ç∑„Çπ„ÉÜ„É†ÂàùÊúüÂåñ‰∏≠...');
                    await initializeRobustSystem();
                }
                
                if (robustEyeTracker && systemInitialized) {
                    await robustEyeTracker.startCalibration();
                } else {
                    throw new Error('ÁúºÁêÉËøΩË∑°„Ç∑„Çπ„ÉÜ„É†„ÅåÂà©Áî®„Åß„Åç„Åæ„Åõ„Çì');
                }
                
            } catch (error) {
                console.error('‚ùå Ê†°Ê≠£ÈñãÂßã„Ç®„É©„Éº:', error);
                
                // „É¶„Éº„Ç∂„Éº„Éï„É¨„É≥„Éâ„É™„Éº„Å™„Ç®„É©„Éº„É°„ÉÉ„Çª„Éº„Ç∏
                const errorOverlay = document.createElement('div');
                errorOverlay.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0, 0, 0, 0.8);
                    z-index: 10000;
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    color: white;
                    font-family: Arial, sans-serif;
                `;
                
                errorOverlay.innerHTML = `
                    <div style="text-align: center; max-width: 500px; padding: 40px; background: rgba(255, 255, 255, 0.1); border-radius: 20px;">
                        <h2 style="color: #ff6b6b;">üö® ÁúºÁêÉËøΩË∑°„ÇíÈñãÂßã„Åß„Åç„Åæ„Åõ„Çì„Åß„Åó„Åü</h2>
                        <p style="margin: 20px 0; line-height: 1.6;">${error.message}</p>
                        <div style="margin-top: 30px;">
                            <button onclick="location.reload()" style="
                                background: #4CAF50;
                                border: none;
                                padding: 12px 24px;
                                border-radius: 20px;
                                color: white;
                                cursor: pointer;
                                margin: 10px;
                            ">üîÑ ÂÜçË™≠„ÅøËæº„Åø</button>
                            <button onclick="this.parentElement.parentElement.parentElement.remove()" style="
                                background: #ff6b6b;
                                border: none;
                                padding: 12px 24px;
                                border-radius: 20px;
                                color: white;
                                cursor: pointer;
                                margin: 10px;
                            ">‚ùå Èñâ„Åò„Çã</button>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(errorOverlay);
            }
        }
        
        // üö®Êñ∞Ê©üËÉΩ: „Ç∞„É≠„Éº„Éê„É´Èñ¢Êï∞„Å®„Åó„Å¶‰ª£ÊõøÊ©üËÉΩ„ÇíÂÆöÁæ©
        window.enableMouseTrackingMode = function() {
            console.log('üñ±Ô∏è „Éû„Ç¶„Çπ„Éà„É©„ÉÉ„Ç≠„É≥„Ç∞„É¢„Éº„ÉâÈñãÂßã');
            
            // „Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØÁîªÈù¢„ÇíÈñâ„Åò„Çã
            const overlays = document.querySelectorAll('[style*="position: fixed"]');
            overlays.forEach(overlay => {
                if (overlay.style.zIndex >= 10000) overlay.remove();
            });
            
            // „Éû„Ç¶„Çπ„Éà„É©„ÉÉ„Ç≠„É≥„Ç∞Ê©üËÉΩ„ÇíÊúâÂäπÂåñ
            initializeMouseTracking();
            
            // „Çπ„ÉÜ„Éº„Çø„ÇπÊõ¥Êñ∞
            updateSystemStatus('ready', '„Éû„Ç¶„Çπ„Éà„É©„ÉÉ„Ç≠„É≥„Ç∞„É¢„Éº„ÉâÊúâÂäπ');
        };
        
        window.copyLocalServerCommand = function() {
            const command = 'python -m http.server 8000';
            
            if (navigator.clipboard) {
                navigator.clipboard.writeText(command).then(() => {
                    alert('‚úÖ „Çµ„Éº„Éê„ÉºËµ∑Âãï„Ç≥„Éû„É≥„Éâ„Çí„Ç≥„Éî„Éº„Åó„Åæ„Åó„ÅüÔºÅ\n\n„Çø„Éº„Éü„Éä„É´„Åß‰ª•‰∏ã„ÇíÂÆüË°å„Åó„Å¶„Åè„Å†„Åï„ÅÑÔºö\n' + command + '\n\n„Åù„ÅÆÂæå http://localhost:8000 „Åß„Ç¢„ÇØ„Çª„Çπ');
                }).catch(() => {
                    fallbackCopy(command);
                });
            } else {
                fallbackCopy(command);
            }
            
            function fallbackCopy(text) {
                const textArea = document.createElement('textarea');
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                alert('‚úÖ „Çµ„Éº„Éê„ÉºËµ∑Âãï„Ç≥„Éû„É≥„Éâ„Çí„Ç≥„Éî„Éº„Åó„Åæ„Åó„ÅüÔºÅ\n\n„Çø„Éº„Éü„Éä„É´„Åß‰ª•‰∏ã„ÇíÂÆüË°å„Åó„Å¶„Åè„Å†„Åï„ÅÑÔºö\n' + text + '\n\n„Åù„ÅÆÂæå http://localhost:8000 „Åß„Ç¢„ÇØ„Çª„Çπ');
            }
        };
        
        function initializeMouseTracking() {
            // Êó¢Â≠ò„ÅÆ„Éà„É©„ÉÉ„Ç´„Éº„ÇíÂâäÈô§
            const existingTracker = document.getElementById('mouse-tracker');
            if (existingTracker) existingTracker.remove();
            
            let mouseTrackingActive = true;
            
            // „Éû„Ç¶„Çπ„Éà„É©„ÉÉ„Ç≠„É≥„Ç∞Ë°®Á§∫
            const tracker = document.createElement('div');
            tracker.id = 'mouse-tracker';
            tracker.style.cssText = `
                position: fixed;
                width: 15px;
                height: 15px;
                background: radial-gradient(circle, #00ff00, #0080ff);
                border: 2px solid rgba(255, 255, 255, 0.8);
                border-radius: 50%;
                pointer-events: none;
                z-index: 9999;
                transition: all 0.1s ease;
                box-shadow: 0 0 20px rgba(0, 255, 0, 0.6);
            `;
            document.body.appendChild(tracker);
            
            // „Éû„Ç¶„ÇπËøΩË∑°
            document.addEventListener('mousemove', (e) => {
                if (!mouseTrackingActive) return;
                
                tracker.style.left = (e.clientX - 7) + 'px';
                tracker.style.top = (e.clientY - 7) + 'px';
                
                // „Ç§„É≥„Çø„É©„ÇØ„ÉÜ„Ç£„ÉñË¶ÅÁ¥†„Å®„ÅÆÁõ∏‰∫í‰ΩúÁî®
                const elements = document.elementsFromPoint(e.clientX, e.clientY);
                elements.forEach(element => {
                    if (element.classList.contains('gaze-interactive') || 
                        element.classList.contains('predictive-hover')) {
                        triggerMouseEffect(element);
                    }
                });
            });
            
            // ÊÉÖÂ†±„Éë„Éç„É´Ë°®Á§∫
            showMouseTrackingInfo();
        }
        
        function triggerMouseEffect(element) {
            element.style.transition = 'all 0.3s ease';
            element.style.transform = 'scale(1.02)';
            element.style.boxShadow = '0 0 15px rgba(0, 255, 0, 0.4)';
            
            setTimeout(() => {
                element.style.transform = '';
                element.style.boxShadow = '';
            }, 500);
        }
        
        function showMouseTrackingInfo() {
            // Êó¢Â≠ò„ÅÆÊÉÖÂ†±„Éë„Éç„É´„ÇíÂâäÈô§
            const existingPanel = document.querySelector('#mouse-tracking-info');
            if (existingPanel) existingPanel.remove();
            
            const infoPanel = document.createElement('div');
            infoPanel.id = 'mouse-tracking-info';
            infoPanel.style.cssText = `
                position: fixed;
                top: 80px;
                right: 20px;
                background: rgba(0, 0, 0, 0.9);
                color: #00ff00;
                padding: 15px;
                border-radius: 10px;
                font-family: Arial, sans-serif;
                font-size: 12px;
                z-index: 1001;
                border: 1px solid #00ff00;
                box-shadow: 0 0 15px rgba(0, 255, 0, 0.3);
            `;
            
            infoPanel.innerHTML = `
                <strong>üñ±Ô∏è „Éû„Ç¶„Çπ„Éà„É©„ÉÉ„Ç≠„É≥„Ç∞ÊúâÂäπ</strong><br>
                „Éª„Éû„Ç¶„Çπ„Åß„Ç§„É≥„Çø„É©„ÇØ„Ç∑„Éß„É≥‰ΩìÈ®ì‰∏≠<br>
                „ÉªË¶ÅÁ¥†„Å´„Éõ„Éê„Éº„Åô„Çã„Å®ÂèçÂøú„Åó„Åæ„Åô<br>
                „ÉªÁúºÁêÉËøΩË∑°„ÅÆ‰ª£ÊõøÊ©üËÉΩ„Å®„Åó„Å¶Âãï‰Ωú<br>
                <button onclick="this.parentElement.remove()" style="
                    background: #00ff00;
                    border: none;
                    color: black;
                    padding: 5px 10px;
                    border-radius: 3px;
                    cursor: pointer;
                    margin-top: 10px;
                    font-size: 10px;
                    font-weight: bold;
                ">Èñâ„Åò„Çã</button>
            `;
            
            document.body.appendChild(infoPanel);
            
            // 10ÁßíÂæå„Å´Ëá™Âãï„ÅßÈñâ„Åò„Çã
            setTimeout(() => {
                if (infoPanel.parentElement) {
                    infoPanel.style.opacity = '0';
                    setTimeout(() => {
                        if (infoPanel.parentElement) infoPanel.remove();
                    }, 300);
                }
            }, 10000);
        }

        // „Éö„Éº„Ç∏Ë™≠„ÅøËæº„ÅøÂæå„Å´Ëá™ÂãïÂàùÊúüÂåñ
        document.addEventListener('DOMContentLoaded', () => {
            console.log('üìÑ DOMË™≠„ÅøËæº„ÅøÂÆå‰∫Ü - Ëá™ÂãïÂàùÊúüÂåñÈñãÂßã');
            setTimeout(initializeRobustSystem, 1000); // 1ÁßíÂæå„Å´ÂàùÊúüÂåñÈñãÂßã
        });

        // „Åù„ÅÆ‰ªñ„ÅÆ„Éá„É¢Ê©üËÉΩ„ÅØÊó¢Â≠ò„ÅÆ„Åæ„Åæ‰øùÊåÅ
        function toggleMousePrediction() {
            document.body.style.cursor = 'crosshair';
            setTimeout(() => {
                document.body.style.cursor = 'default';
            }, 3000);
        }

        function changeEmotion(emotion) {
            document.getElementById('emotion-display').textContent = emotion.charAt(0).toUpperCase() + emotion.slice(1);
        }

        function addParticles() {
            console.log('„Éë„Éº„ÉÜ„Ç£„ÇØ„É´ËøΩÂä†Ôºà„Éá„É¢Ôºâ');
        }

        function updateParticleCount(count) {
            console.log('„Éë„Éº„ÉÜ„Ç£„ÇØ„É´Êï∞Êõ¥Êñ∞:', count);
        }

        function updateAnimationSpeed(speed) {
            document.documentElement.style.setProperty('--animation-speed', `${speed}s`);
        }

        function updatePerformanceMode(mode) {
            document.body.className = document.body.className.replace(/\b(high|low|balanced)-performance\b/g, '');
            if (mode !== 'auto') {
                document.body.classList.add(`${mode}-performance`);
            }
        }

        function toggleDebugMode() {
            document.body.classList.toggle('debug-mode');
        }

        // „Éö„Éº„Ç∏„Ç¢„É≥„É≠„Éº„ÉâÊôÇ„ÅÆ„ÇØ„É™„Éº„É≥„Ç¢„ÉÉ„Éó
        window.addEventListener('beforeunload', () => {
            if (eyeTracker) {
                eyeTracker.stop();
            }
        });
    </script>

    <!-- Demo Control Script -->
    <script>
        // Demo-specific functionality
        let debugMode = false;
        let enhancedSystem = null;

        // Initialize demo when page loads
        document.addEventListener('DOMContentLoaded', () => {
            // Animate code lines
            animateCodeLines();
            
            // Update status indicators
            updateStatusIndicators();
        });

        function animateCodeLines() {
            const codeLines = document.querySelectorAll('.code-line');
            codeLines.forEach((line, index) => {
                line.style.animationDelay = `${index * 0.2}s`;
            });
        }

        function updateStatusIndicators() {
            // Simulate status updates
            setTimeout(() => {
                document.getElementById('mouse-status').className = 'status-light active';
            }, 1000);
            
            setTimeout(() => {
                document.getElementById('particle-status').className = 'status-light active';
            }, 2000);
            
            setTimeout(() => {
                document.getElementById('emotion-status').className = 'status-light active';
            }, 3000);
        }

        // Enhanced system initialization removed - using direct WebGazer.js implementation

        function toggleDebugMode() {
            debugMode = !debugMode;
            document.body.classList.toggle('debug-mode', debugMode);
            
            if (debugMode) {
                startDebugUpdates();
            }
        }

        function startDebugUpdates() {
            setInterval(() => {
                if (debugMode) {
                    updateDebugInfo();
                }
            }, 100);
        }

        function updateDebugInfo() {
            const mousePos = document.getElementById('mouse-pos');
            const gazePos = document.getElementById('gaze-pos');
            const currentEmotion = document.getElementById('current-emotion');
            const particleCount = document.getElementById('particle-count');
            const memoryUsage = document.getElementById('memory-usage');

            // Update with actual values if available
            if (performance.memory) {
                memoryUsage.textContent = `${Math.round(performance.memory.usedJSHeapSize / 1024 / 1024)}MB`;
            }
        }

        // Duplicate function removed - using main implementation above

        function toggleMousePrediction() {
            // Demo mouse prediction
            document.body.style.cursor = 'crosshair';
            setTimeout(() => {
                document.body.style.cursor = 'default';
            }, 3000);
        }

        function changeEmotion(emotion) {
            document.getElementById('emotion-display').textContent = emotion.charAt(0).toUpperCase() + emotion.slice(1);
            
            // Trigger emotion change event
            const event = new CustomEvent('emotionChange', {
                detail: { emotion: emotion }
            });
            document.dispatchEvent(event);
        }

        function addParticles() {
            const event = new CustomEvent('addParticles', {
                detail: { count: 50 }
            });
            document.dispatchEvent(event);
        }

        function updateParticleCount(count) {
            const event = new CustomEvent('updateParticleCount', {
                detail: { count: parseInt(count) }
            });
            document.dispatchEvent(event);
        }

        function updateAnimationSpeed(speed) {
            document.documentElement.style.setProperty('--animation-speed', `${speed}s`);
        }

        function updatePerformanceMode(mode) {
            document.body.className = document.body.className.replace(/\b(high|low|balanced)-performance\b/g, '');
            
            if (mode !== 'auto') {
                document.body.classList.add(`${mode}-performance`);
            }
        }

        // Track mouse position for debug
        document.addEventListener('mousemove', (e) => {
            if (debugMode) {
                document.getElementById('mouse-pos').textContent = `${e.clientX}, ${e.clientY}`;
            }
        });

        // FPS Counter
        let frameCount = 0;
        let lastTime = Date.now();

        function updateFPS() {
            frameCount++;
            const now = Date.now();
            
            if (now - lastTime >= 1000) {
                document.getElementById('fps-display').textContent = frameCount;
                frameCount = 0;
                lastTime = now;
            }
            
            requestAnimationFrame(updateFPS);
        }
        updateFPS();

        // Performance monitoring
        if (performance.memory) {
            setInterval(() => {
                const memoryMB = performance.memory.usedJSHeapSize / 1024 / 1024;
                if (memoryMB > 100) {
                    document.body.classList.add('high-memory');
                } else {
                    document.body.classList.remove('high-memory');
                }
            }, 5000);
        }
    </script>
</body>
</html>